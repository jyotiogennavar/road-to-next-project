{"id":-1,"name":"Onboarding diagram","userId":-1,"createdAt":"","updatedAt":"","content":{"items":[{"uid":"EuKqtE_Fc8","position":{"x":-870,"y":-200},"sizes":{"width":400,"height":573.6875},"autoheight":true,"blockContent":{"content":[{"type":"filePathNode","attrs":{"pathToFile":"","version":1},"content":[{"type":"text","marks":[{"type":"bold"}],"text":"src\\utils\\currency.ts"}]},{"type":"codeBlock","attrs":{"language":"typescript","wrapCode":true},"content":[{"type":"text","text":"import { MyBig } from \"@/lib/big\";\r\n\r\n/**\r\n * Convert a number to a currency string.\r\n * @param amount - The amount in cents.\r\n * @returns The formatted currency string.\r\n */\r\n\r\nexport const toCent = (amount: number) => \r\n new MyBig(amount).mul(100).round(2).toNumber();\r\n\r\nexport const fromCent = (amount: number) => \r\n  new MyBig(amount).div(100).round(2).toNumber();\r\n \r\n\r\nexport const toCurrencyFromCent = (amount: number) => {\r\n  return new Intl.NumberFormat(\"en-US\", {\r\n    style: \"currency\",\r\n    currency: \"USD\",\r\n    minimumFractionDigits: 2,\r\n    maximumFractionDigits: 2,\r\n  }).format(fromCent(amount));\r\n};\r\n"}]}]},"nodeType":"block"},{"uid":"oSMHF6NvUN","position":{"x":-310,"y":-300},"sizes":{"width":400,"height":346.1875},"autoheight":true,"blockContent":{"content":[{"type":"filePathNode","attrs":{"pathToFile":"","version":1},"content":[{"type":"text","marks":[{"type":"bold"}],"text":"src\\features\\ticket\\actions\\upsert-ticket.ts"}]},{"type":"codeBlock","attrs":{"language":"typescript","wrapCode":true},"content":[{"type":"text","text":"const dbData = {\r\n  ...data,\r\n  bounty: toCent(data.bounty),\r\n}\r\n\nawait prisma.ticket.upsert({\r\n  where: {\r\n    id: id || \"\",\r\n  },\r\n  update: dbData,\r\n  create: dbData,\r\n});"}]}]},"nodeType":"block"},{"uid":"JdImwvl-PO","position":{"x":-300,"y":130},"sizes":{"width":400,"height":423.1875},"autoheight":true,"blockContent":{"content":[{"type":"filePathNode","attrs":{"pathToFile":"","version":1},"content":[{"type":"text","marks":[{"type":"bold"}],"text":"src\\features\\ticket\\components\\ticket-upsert-form.tsx"}]},{"type":"codeBlock","attrs":{"language":"typescript","wrapCode":true},"content":[{"type":"text","text":"<div className=\"w-1/2\">\r\n  <Label htmlFor=\"bounty\">Bounty ($)</Label>\r\n  <Input\r\n    type=\"number\"\r\n    step=\"0.01\"\r\n    id=\"bounty\"\r\n    name=\"bounty\"\r\n    defaultValue={\r\n      (actionState.payload?.get(\"bounty\") as string) ??\r\n      (ticket?.bounty ? fromCent(ticket?.bounty) : \"\")\r\n    }\r\n  />\r\n</div>"}]}]},"nodeType":"block"},{"uid":"tuQCgSZ8Bs","position":{"x":-830,"y":-350},"sizes":{"width":310,"height":66.1875},"autoheight":true,"blockContent":{"text":"Here we create a seperate file to import this third party npm - big.js for arithmetic functions for currency cal"},"nodeType":"text"},{"uid":"GzgrIG0L5E","position":{"x":-1240,"y":30},"sizes":{"width":380,"height":108.1875},"autoheight":true,"blockContent":{"text":"we create 2 funtions \n1. to convert dollers into cent,\n2. to convert cents to dollers\nthis is when the data comes from the db cuz we cant have float nums in db"},"nodeType":"text"}],"configs":{"centerX":445.3726318720164,"centerY":299.2043652218165,"zoomLevel":0.2860572619437959},"arrowData":{"arrowsMap":{"arrow-point-bI0wBh3Ufk-bottom-point-PSPLIYKa9J-top":{"to":"point-PSPLIYKa9J-top","from":"point-bI0wBh3Ufk-bottom","label":"Normal Box","direction":"ft","selectable":true},"arrow-point-bI0wBh3Ufk-bottom-point-ytXK_ayIc1-top":{"to":"point-ytXK_ayIc1-top","from":"point-bI0wBh3Ufk-bottom","label":"Code Box","direction":"ft","selectable":true},"arrow-point-hyyRZE3E8u-right-point-6ZopTaEaDZ-left":{"to":"point-6ZopTaEaDZ-left","from":"point-hyyRZE3E8u-right","label":"call","direction":"ft","selectable":true}},"pointsMap":{"point-PSPLIYKa9J-top":{"x":805.9999797489683,"y":60,"id":"point-PSPLIYKa9J-top","direction":"top"},"point-ytXK_ayIc1-top":{"x":205.99999493724206,"y":60,"id":"point-ytXK_ayIc1-top","direction":"top"},"point-6ZopTaEaDZ-left":{"x":220,"y":605.9999898744841,"id":"point-6ZopTaEaDZ-left","direction":"left"},"point-hyyRZE3E8u-right":{"x":100,"y":606,"id":"point-hyyRZE3E8u-right","direction":"right"},"point-bI0wBh3Ufk-bottom":{"x":515.9999797489683,"y":-40,"id":"point-bI0wBh3Ufk-bottom","direction":"bottom"}},"edgesMap":{"edge-EuKqtE_Fc8-EuKqtE_Fc8-right-oSMHF6NvUN-oSMHF6NvUN-left":{"uid":"edge-EuKqtE_Fc8-EuKqtE_Fc8-right-oSMHF6NvUN-oSMHF6NvUN-left","fromNodeId":"EuKqtE_Fc8","fromHandleId":"EuKqtE_Fc8-right","toNodeId":"oSMHF6NvUN","toHandleId":"oSMHF6NvUN-left","direction":"ft","selectable":true,"type":"solid","content":{"label":""}},"edge-EuKqtE_Fc8-EuKqtE_Fc8-right-JdImwvl-PO-JdImwvl-PO-left":{"uid":"edge-EuKqtE_Fc8-EuKqtE_Fc8-right-JdImwvl-PO-JdImwvl-PO-left","fromNodeId":"EuKqtE_Fc8","fromHandleId":"EuKqtE_Fc8-right","toNodeId":"JdImwvl-PO","toHandleId":"JdImwvl-PO-left","direction":"ft","selectable":true,"type":"solid","content":{"label":""}}}}}}